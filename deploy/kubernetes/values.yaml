# Default values for RDF-StarBase
# This is a YAML-formatted file.

# Replica configuration
replicaCount: 1

# Image configuration
image:
  repository: ontus/rdfstarbase
  pullPolicy: IfNotPresent
  tag: ""  # Overrides the image tag, defaults to Chart.appVersion

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# Service Account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Pod annotations and labels
podAnnotations: {}
podLabels: {}

# Security contexts
podSecurityContext:
  fsGroup: 1000

securityContext:
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  runAsUser: 1000

# Service configuration
service:
  type: ClusterIP
  port: 8000
  annotations: {}

# Ingress configuration
ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
    # nginx.ingress.kubernetes.io/proxy-body-size: "100m"
  hosts:
    - host: rdfstarbase.local
      paths:
        - path: /
          pathType: Prefix
  tls: []
    # - secretName: rdfstarbase-tls
    #   hosts:
    #     - rdfstarbase.local

# Resource limits
resources:
  limits:
    cpu: 2000m
    memory: 4Gi
  requests:
    cpu: 500m
    memory: 1Gi

# Horizontal Pod Autoscaler
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# Persistent Volume
persistence:
  enabled: true
  storageClass: ""
  accessModes:
    - ReadWriteOnce
  size: 50Gi
  annotations: {}

# Node selection
nodeSelector: {}

tolerations: []

affinity: {}

# RDF-StarBase configuration
config:
  # Log level: DEBUG, INFO, WARNING, ERROR
  logLevel: INFO
  
  # Maximum memory for query processing (bytes)
  maxMemory: 2147483648  # 2GB
  
  # Query timeout in seconds
  queryTimeout: 300
  
  # Enable reasoning
  reasoningEnabled: true
  
  # WAL (Write-Ahead Log) settings
  walEnabled: true
  walFlushInterval: 1000  # milliseconds
  
  # Compaction settings
  compactionEnabled: true
  compactionThreshold: 100000  # triples
  
  # API settings
  corsOrigins: "*"
  rateLimitEnabled: true
  rateLimitQueriesPerMinute: 100

# Health check configuration
healthCheck:
  enabled: true
  livenessProbe:
    httpGet:
      path: /health/live
      port: http
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  readinessProbe:
    httpGet:
      path: /health/ready
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3
  startupProbe:
    httpGet:
      path: /health/startup
      port: http
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 30

# Prometheus metrics
metrics:
  enabled: true
  port: 9090
  path: /metrics
  serviceMonitor:
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    labels: {}

# Multi-tenancy
multiTenancy:
  enabled: false
  defaultQuotas:
    repositories: 10
    triplesPerRepo: 10000000
    storageBytes: 10737418240  # 10GB
    queriesPerMinute: 100

# Federation
federation:
  enabled: false
  endpoints: []
    # - url: https://remote-sparql.example.com/sparql
    #   name: remote-sparql
    #   authToken: ""

# Backup configuration
backup:
  enabled: false
  schedule: "0 2 * * *"  # 2 AM daily
  retention: 7  # days
  s3:
    enabled: false
    bucket: ""
    region: ""
    endpoint: ""
    accessKey: ""
    secretKey: ""

# Init containers
initContainers: []

# Extra environment variables
extraEnv: []
  # - name: EXTRA_VAR
  #   value: "value"

# Extra volumes
extraVolumes: []

# Extra volume mounts
extraVolumeMounts: []

# Extra containers (sidecars)
extraContainers: []
